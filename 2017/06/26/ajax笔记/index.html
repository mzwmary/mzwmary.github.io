<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>前端-花开两岸</title>
  <meta name="author" content="Mary">
  
  <meta name="description" content="http服务&amp;amp;ajax编程1. 服务器
通俗的讲，能够提供某种服务的机器（计算机）称为服务器

1.1. 如何理解服务器？生活中案例：
123便利店  &amp;lt;---&amp;gt;  服务器 货架，冰柜，POS机 &amp;lt;---&amp;gt; 服务器软件 卖零食水果，代收快递 ，充值缴费 &amp;lt;---">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="前端-花开两岸"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="前端-花开两岸" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">  
  <link rel="stylesheet" href="/css/sidenav.css" media="screen" type="text/css">  
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  

</head>

<body id="body" data-spy="scroll" data-target=".toc">
  <div class="container" id="container">
	<div class="content">
	  <div class="page-header">		
  <h1><a class="brand" href="/">前端-花开两岸</a><span class="split"></span><span class="title"></span><span class="date" id="title-date"><i class="fa fa-clock-o"></i> 2017-06-26</span></h1>
</div>		

<div class="row page">
  <!-- cols -->	
  
  

  
	<div class="col-md-12">
	  

	  <!-- content -->
	  <h1 id="http服务-amp-ajax编程"><a href="#http服务-amp-ajax编程" class="headerlink" title="http服务&amp;ajax编程"></a>http服务&amp;ajax编程</h1><h2 id="1-服务器"><a href="#1-服务器" class="headerlink" title="1. 服务器"></a>1. 服务器</h2><blockquote>
<p>通俗的讲，能够提供某种服务的机器（计算机）称为服务器</p>
</blockquote>
<h3 id="1-1-如何理解服务器？"><a href="#1-1-如何理解服务器？" class="headerlink" title="1.1. 如何理解服务器？"></a>1.1. 如何理解服务器？</h3><p>生活中案例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">便利店  &lt;---&gt;  服务器 </div><div class="line">货架，冰柜，POS机 &lt;---&gt; 服务器软件 </div><div class="line">卖零食水果，代收快递 ，充值缴费 &lt;---&gt; 服务</div></pre></td></tr></table></figure>
<p>相对应的关系：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">便利店 &lt;---&gt; 配上货架，冰柜 &lt;---&gt; 卖零食，水果</div><div class="line">服务器 &lt;---&gt; 安装服务器软件 &lt;---&gt; 提供服务</div></pre></td></tr></table></figure>
<p>编程世界中案例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">服务器 &lt;---&gt; 计算机</div><div class="line">服务器软件 &lt;---&gt; 可存储网页软件，收发网页软件</div><div class="line">服务 &lt;---&gt; 存放网页，发送网页</div></pre></td></tr></table></figure>
<blockquote>
<p>便利店要增加新的业务,该如何操作？</p>
</blockquote>
<h3 id="1-2-服务器软件"><a href="#1-2-服务器软件" class="headerlink" title="1.2 服务器软件"></a>1.2 服务器软件</h3><blockquote>
<p>使计算机能提供某种服务的应用软件，称之为服务器软件.<br>服务器通过安装相应的服务器软件，然后进行配置后就可以对外提供某种服务。</p>
</blockquote>
<p>常见的服务器软件有：</p>
<ul>
<li>文件服务器：Server-U、FileZilla、VsFTP等（FTP是File Transfer Protocol文件传输协议）；</li>
<li>数据库服务器：oracle、mysql、SQL server、DB2、ACCESS等；</li>
<li>邮件服务器：Postfix、Sendmail等；</li>
<li><strong>HTTP服务器</strong>：Apache、Nginx、IIS、Tomcat、NodeJS等；</li>
</ul>
<blockquote>
<p>服务器想要对外提供什么服务，就安装相应的服务器软件。</p>
</blockquote>
<h3 id="1-3-服务器类型"><a href="#1-3-服务器类型" class="headerlink" title="1.3 服务器类型"></a>1.3 服务器类型</h3><p>按不同的划分标准，服务器可划分为以下类型：</p>
<ul>
<li>按<strong>软件功能类型</strong>划分： 文件服务器、数据库服务器、邮件服务器、Web服务器等；</li>
<li>按<strong>安装操作系统</strong>划分： Linux服务器、Windows服务器等；</li>
<li>按<strong>应用软件名称</strong>划分： Apache服务器、Nginx 服务器、IIS服务器、Tomcat服务器、<br>mysql服务器、oracle服务器、 Node服务器等；</li>
</ul>
<blockquote>
<p>本质：无论是按软件功能，还是安装的系统，或名称称呼,服务器的本质就是一台装了某款服务器软件的计算机。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">有点类似：</div><div class="line">经营类别: 水果便利店，生鲜便利店</div><div class="line">店铺名称: 711便利店，喜事多</div><div class="line">所属地域: 日本便利店，中国便利店</div></pre></td></tr></table></figure>
<blockquote>
<p>便利店本质都是提供售货，和一些便民服务。</p>
</blockquote>
<h3 id="1-4-HTTP服务器"><a href="#1-4-HTTP服务器" class="headerlink" title="1.4 HTTP服务器"></a>1.4 HTTP服务器</h3><blockquote>
<p>即网站服务器，主要提供文档(文本、图片、视频、音频)浏览服务，通常会安装Apache、Nginx服务器软件。</p>
</blockquote>
<p>HTTP服务器可以结合某一编程语言处理业务逻辑，由此进行的开发，通常称之为<strong>服务端开发</strong>。 </p>
<p>服务端的编程语言包括 php、java、.net、Python、Ruby、Perl等。  </p>
<h3 id="服务器总结："><a href="#服务器总结：" class="headerlink" title="服务器总结："></a>服务器总结：</h3><ol>
<li>服务器就是计算机，通过安装服务器软件，才能向外提供服务。</li>
<li>根据服务器软件的功能，名称，安装的系统这些不同的标准，可以划分出不同类型的服务器。</li>
<li>HTTP服务器主要提供网站浏览服务，可以结合某编程语言进行开发，我们称之为服务器开发。</li>
</ol>
<p><img src="./imgs/server.png" alt="服务器图片"></p>
<h2 id="2、客户端"><a href="#2、客户端" class="headerlink" title="2、客户端"></a>2、客户端</h2><h3 id="2-1-如何理解客户端"><a href="#2-1-如何理解客户端" class="headerlink" title="2.1 如何理解客户端?"></a>2.1 如何理解客户端?</h3><ul>
<li>客户端：电脑，手机，iPad平板安装了客户端软件，可以称之为客户端。</li>
<li>客户端：安装客户端软件，<strong>索取服务</strong>一方（向服务器获取）</li>
<li>服务端：安装服务端软件，<strong>提供服务</strong>一方（向客户端提供）</li>
</ul>
<blockquote>
<p>具有向服务器<strong>索取服务</strong>能力的终端，如比如 手机、电脑等<br>安装不同的客户端软件，可以获取不同的服务，比如通过QQ获得即时通讯服务、通过迅雷获得下载服务等。</p>
</blockquote>
<h3 id="2-2-索取服务与提供服务理解"><a href="#2-2-索取服务与提供服务理解" class="headerlink" title="2.2 索取服务与提供服务理解"></a>2.2 索取服务与提供服务理解</h3><p>QQ聊天案例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">我的手机QQ ---&gt; 编辑消息 ---&gt; 发送 ---&gt; 信息去哪里了?</div><div class="line">朋友手机QQ ---&gt; 如何接收消息?</div><div class="line">问：为什么可以发消息，可以接收?</div><div class="line">问：消息发出去都会去哪里?</div></pre></td></tr></table></figure>
<h3 id="2-3-常见的客户端软件："><a href="#2-3-常见的客户端软件：" class="headerlink" title="2.3 常见的客户端软件："></a>2.3 常见的客户端软件：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">铁路12306 ---&gt; 订购车票服务</div><div class="line">迅雷客户端 ---&gt; 下载小片子</div><div class="line">Foxmail ---&gt; 收发邮件</div><div class="line">今日头条，百度新闻 ---&gt; 看新闻服务（关心国家大事）。</div></pre></td></tr></table></figure>
<h3 id="2-4-客户端如何分类？"><a href="#2-4-客户端如何分类？" class="headerlink" title="2.4.客户端如何分类？"></a>2.4.客户端如何分类？</h3><ul>
<li>系统划分：IOS端，安卓端，window</li>
<li>设备划分：手机端，电脑端　</li>
<li>特性划分：浏览器（网页应用），非浏览器（桌面应用）</li>
</ul>
<blockquote>
<p>以浏览器为宿主环境，结合 HTML、CSS、Javascript等技术，而进行的一系列开发，通常称之为<strong>前端开发</strong>。</p>
</blockquote>
<h3 id="2-5-CS-BS软件（了解）"><a href="#2-5-CS-BS软件（了解）" class="headerlink" title="2.5 CS/BS软件（了解）"></a>2.5 CS/BS软件（了解）</h3><table>
<thead>
<tr>
<th>CS软件</th>
<th>CS软件</th>
</tr>
</thead>
<tbody>
<tr>
<td>手机QQ，LOL游戏 , 手机微信</td>
<td>网页QQ，新浪网站，网页地图</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>1. 需要安装，手机、电脑桌面应用</td>
<td>1. 不用安装，运行在浏览器网页应用</td>
</tr>
<tr>
<td>2. 性能更高效，更稳定，使用更流畅</td>
<td>2. 性能相对较低，流畅性弱（依赖浏览器）</td>
</tr>
<tr>
<td>3. 开发及维护难度增大</td>
<td>3. 开发维护相对更快</td>
</tr>
<tr>
<td>4. 兼容各种系统平台</td>
<td>4. 兼容浏览器</td>
</tr>
</tbody>
</table>
<blockquote>
<p>CS 就是（client/server） 客户端+服务器 的应用<br>BS 就是（browser/server） 浏览器+服务器 的应用( 一种特殊的CS 软件)<br>小结：CS手机电脑桌面用应，BS浏览器网页应用。</p>
</blockquote>
<h3 id="客户端总结："><a href="#客户端总结：" class="headerlink" title="客户端总结："></a>客户端总结：</h3><ol>
<li>客户端就是手机，iPad平板，电脑，等智能设备，装有了客户端软件，可以获取服务器上的服务。</li>
<li>服务器是提供服务一方，客户端是索取服务一方</li>
<li>客户端通常按设备，系统划分，把浏览器中网页应用单独划分，则有了BS/CS应用之分。</li>
<li>我们做的都是浏览器网页应用,都是BS架构.</li>
<li>以浏览器为宿主环境,使用html,css,js技术的开发称为前端开发，需要后台开发人员配合。</li>
</ol>
<p><img src="./imgs/client.png" alt="客户端图片"></p>
<h2 id="3、网络基础-IP-域名-端口-DNS服务"><a href="#3、网络基础-IP-域名-端口-DNS服务" class="headerlink" title="3、网络基础 IP , 域名 , 端口, DNS服务."></a>3、网络基础 IP , 域名 , 端口, DNS服务.</h2><blockquote>
<p>问: 网络上的电脑又是如何沟通交流的?</p>
</blockquote>
<h3 id="3-1-如何理解这些概念？"><a href="#3-1-如何理解这些概念？" class="headerlink" title="3.1 如何理解这些概念？"></a>3.1 如何理解这些概念？</h3><p>生活中案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">问题: 我要找好日子便利店拿快递, 但我不知道详细地址怎么办？</div><div class="line"></div><div class="line">店铺详细地址：北京市昌平区天安门路100号A003铺位（IP地址）</div><div class="line">店铺名称：天安门好日子便利店（域名）</div><div class="line">店铺业务：卖零食,收快递（端口）</div><div class="line"></div><div class="line">方案:</div><div class="line">1. 把店名和地址对应：问自己的家人 ---&gt; 再问外面的人（DNS寻址）</div><div class="line">2. 拿快递（获取服务）</div></pre></td></tr></table></figure></p>
<h3 id="3-2-IP地址"><a href="#3-2-IP地址" class="headerlink" title="3.2 IP地址"></a>3.2 IP地址</h3><p>IP地址: 每个连接在互联网上的电脑主机在网络上的唯一标识（身份证，手机电话号码）</p>
<blockquote>
<p>形式: 一个32位地址(192.168.10.100)<br>查看本机IP地址: ipconfig、ifconfig（linux,mac）<br>查看网站IP地址: ping  www.baidu.com</p>
</blockquote>
<h3 id="3-3-域名"><a href="#3-3-域名" class="headerlink" title="3.3 域名"></a>3.3 域名</h3><p>由于IP地址基于数字，不方便记忆，于是便用域名来代替IP地址，域名是一个IP地址的“面具”  </p>
<blockquote>
<p>形式: www.baidu.com<br>查看域名对应的IP地址: ping www.baidu.com</p>
</blockquote>
<h3 id="3-4-DNS服务"><a href="#3-4-DNS服务" class="headerlink" title="3.4 DNS服务"></a>3.4 DNS服务</h3><p>DNS（Domain Name System）网上作为域名和IP地址相互映射的一个分布式数据库，<br>它能够使用户更方便的通过域名形式访问网站。</p>
<blockquote>
<p>DNS服务器: 简单的说就是指记录IP地址和域名之间对应关系的服务器电脑。<br>  DNS寻址:先找本机hosts文件、再找DNS服务器( 专干对应域名IP的活 )<br>  刷新DNS： ipconfig /flushdns </p>
</blockquote>
<h3 id="3-5-端口"><a href="#3-5-端口" class="headerlink" title="3.5 端口"></a>3.5 端口</h3><p>端口号是计算机与外界通讯交流的出口，每个端口对应不同的服务。</p>
<blockquote>
<p>查看端口占用情况： netstat -an<br>常见端口号 80、8080、3306、21、22</p>
</blockquote>
<h2 id="4-搭建WEB服务器"><a href="#4-搭建WEB服务器" class="headerlink" title="4 搭建WEB服务器"></a>4 搭建WEB服务器</h2><blockquote>
<p>问: 要搭建一个网站服务器,需要安装哪些服务器软件呢?</p>
</blockquote>
<h3 id="4-1-什么是集成环境软件？"><a href="#4-1-什么是集成环境软件？" class="headerlink" title="4.1 什么是集成环境软件？"></a>4.1 什么是集成环境软件？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">360一键安装包 : 360浏览器 + 360杀毒 + 360软件管家 + 360手机助手</div><div class="line">phpStudy集成软件: &#123; windows &#125; + Apache + Mysql + PHP</div></pre></td></tr></table></figure>
<p><img src="./imgs/phpstudy.png" alt="phpstudy软件"></p>
<h3 id="4-2-安装phpStudy"><a href="#4-2-安装phpStudy" class="headerlink" title="4.2 安装phpStudy"></a>4.2 安装phpStudy</h3><ul>
<li>双击解压即可安装(<strong>非中文路径</strong>)。</li>
<li>建议安装在D盘</li>
</ul>
<h3 id="4-3-管理HTTP服务"><a href="#4-3-管理HTTP服务" class="headerlink" title="4.3 管理HTTP服务"></a>4.3 管理HTTP服务</h3><ul>
<li>任务图标<strong>绿色为正常启动</strong>状态,红色为失败 </li>
<li>通过图形控制台可以 启动、重启、停止所有服务  </li>
</ul>
<h3 id="4-4-访问网站根目录"><a href="#4-4-访问网站根目录" class="headerlink" title="4.4 访问网站根目录"></a>4.4 访问网站根目录</h3><ol>
<li>服务器软件安装后，输入ip地址（或者回环IP地址：127.0.0.1）。</li>
<li>默认会打开 WWW 目录，该目录为根目录</li>
<li>如果文件夹中，有index.html 或 index.php文件，会被默认打开。</li>
</ol>
<p><strong>访问注意事项：</strong>  </p>
<ol>
<li>检查网络是不是通的 ping 对方IP  </li>
<li>检查防火墙是否开启，如果开启将不能正常被访问  </li>
<li>理解默认索引  </li>
<li>确保端口没有被<strong>其它程序</strong>占用  </li>
<li>修改配置要格外小心，禁止<strong>无意修改</strong>其它内容  </li>
</ol>
<h3 id="4-5-更改网站内容"><a href="#4-5-更改网站内容" class="headerlink" title="4.5 更改网站内容"></a>4.5 更改网站内容</h3><ul>
<li>将我们制作好的网页<strong>拷贝</strong>到配置好的根目录下</li>
<li>浏览器访问127.0.0.1即可。</li>
</ul>
<h3 id="4-8-更改默认打开首页"><a href="#4-8-更改默认打开首页" class="headerlink" title="4.8 更改默认打开首页"></a>4.8 更改默认打开首页</h3><p>步骤1：phpstudy其他选项设置</p>
<p><img src="./imgs/phpstudy_01.png" alt="step_其他选项设置"></p>
<p>步骤2：phpstudy设置 —-&gt; 端口常规设置</p>
<p><img src="./imgs/phpstudy_13.png" alt="setps_端口常规设置1"></p>
<p><img src="./imgs/phpstudy_14.png" alt="setps_端口常规设置2"></p>
<blockquote>
<p>当进入网站时，默认会寻找目录中的index.html ，index.php , index.htm文件<br>我们把index.php文件排在最前面，就可以优先找到index.php文件，因为我们下午就要学习php开发。</p>
</blockquote>
<h3 id="4-6-多个域名网站配置"><a href="#4-6-多个域名网站配置" class="headerlink" title="4.6 多个域名网站配置"></a>4.6 多个域名网站配置</h3><p>步骤1：phpstudy其他选项设置</p>
<p><img src="./imgs/phpstudy_01.png" alt="steps_其他选项设置"></p>
<p>步骤2：phpstudy其他选项设置 —-&gt; 站点和域名管理</p>
<p><img src="./imgs/phpstudy_02.png" alt="steps_站点域名管理1"></p>
<p><img src="./imgs/phpstudy_03.png" alt="steps_站点域名管理2"></p>
<p>步骤3：phpstudy 其他选项设置 —-&gt;打开host文件</p>
<p><strong> 注意：如果修改host文件,出现权限问题。则找到 C:\Windows\System32\drivers\etc 文件夹中将host文件拷贝到桌面修改。然后再粘贴回去 </strong></p>
<p><img src="./imgs/phpstudy_04_1.png" alt="steps_修改host1"></p>
<p><img src="./imgs/phpstudy_04_2.png" alt="steps_修改host2"></p>
<p>把域名和ip地址对应,就可以访问了（以后浏览器，看到这个网址代表的就会找这个IP的电脑）</p>
<p><strong> 注意:配置的网站目录里,如果项目中没index.html或index.php文件则会显示Forbidden 拒绝访问 </strong></p>
<h3 id="4-7-开放目录形式访问权限"><a href="#4-7-开放目录形式访问权限" class="headerlink" title="4.7 开放目录形式访问权限"></a>4.7 开放目录形式访问权限</h3><blockquote>
<p>注意：当网站设置了域名后（为了安全性），phpstudy默认会关闭目录形式的访问(没有index文件，不显示目录,会显示发下画面)<br>为了开发调式方便，我们可以自己打开目录形式的访问。<br><img src="./imgs/phpstudy_06.png" alt="steps_拒绝访问1"></p>
</blockquote>
<p><img src="./imgs/phpstudy_07.png" alt="steps_拒绝访问2"></p>
<p>步骤1： phpstudy其他选项设置—&gt;phpstudy设置—-&gt;允许目录列表（勾选）</p>
<p><img src="./imgs/phpstudy_08.png" alt="steps_允许目录列表1"></p>
<p>步骤2： phpstudy其他选项设置—&gt;打开配置文件—&gt;  vhosts-conf</p>
<p><img src="./imgs/phpstudy_09.png" alt="steps_允许目录列表2"></p>
<p>步骤3：更改options 配置</p>
<p><img src="./imgs/phpstudy_10.png" alt="steps_允许目录列表3"></p>
<p>修改如下：</p>
<p><img src="./imgs/phpstudy_11.png" alt="steps_允许目录列表4"></p>
<p>如配有多个网站则逐一修改即可。</p>
<p>修改完成，<strong>重启phpstudy软件</strong>，则可以显示网站的目录</p>
<p><img src="./imgs/phpstudy_12.png" alt="steps_允许目录列表5"></p>
<h2 id="5-PHP基础"><a href="#5-PHP基础" class="headerlink" title="5 PHP基础"></a>5 PHP基础</h2><p>学习目标：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1. 基础的语法,变量,数据类型，数组使用，分支循环语句。</div><div class="line">2. 用超全局变量（$_GET, $_POST, $_FILES）接收表单的数据。</div><div class="line">3. 掌握常用的函数，和几种输出数据方式</div><div class="line">4. 掌握字符串拼接，以及php后台渲染网页。</div></pre></td></tr></table></figure></p>
<p>注意事项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1. 文件以.php后缀结尾</div><div class="line">2. 代码书写在php标签中 &lt;?php 代码书写位置  ?&gt;;  </div><div class="line">3. 避免使用中文目录和中文文件名</div><div class="line">4. php页面无法直接打开，需要运行在服务器环境当中</div></pre></td></tr></table></figure></p>
<h3 id="5-1-最简单的php程序"><a href="#5-1-最简单的php程序" class="headerlink" title="5.1 最简单的php程序"></a>5.1 最简单的php程序</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">	<span class="comment">/*用来指定编码集*/</span></div><div class="line">	header(<span class="string">'Content-Type:text/html; charset=utf-8'</span>);</div><div class="line">	<span class="comment">/*这是简单的php程序*/</span></div><div class="line">	<span class="keyword">echo</span> <span class="string">'hello world!'</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="5-3-变量"><a href="#5-3-变量" class="headerlink" title="5.3 变量"></a>5.3 变量</h3><ol>
<li>变量以$开头 </li>
<li>变量由字母 , 数字, 下划线组成,但不能以数字开头  </li>
<li>大小写敏感（区分大小写）</li>
<li>声明和使用都要带上$符</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//声明一个变量$name并赋值为'大雄'</span></div><div class="line">$name = <span class="string">'daxiong'</span>;</div><div class="line"></div><div class="line"><span class="comment">//输出$name变量</span></div><div class="line"><span class="keyword">echo</span> $name;   </div><div class="line"></div><div class="line"><span class="comment">//声明一个变量$NAME,并赋值为20</span></div><div class="line">$NAME = <span class="string">'DAXIONG'</span>;</div><div class="line"></div><div class="line"><span class="comment">//输出$NAME变量,两个变量是不相同的</span></div><div class="line"><span class="keyword">echo</span> $NAME;</div></pre></td></tr></table></figure>
<h3 id="5-3-数据类型"><a href="#5-3-数据类型" class="headerlink" title="5.3 数据类型"></a>5.3 数据类型</h3><p><strong>字符型</strong>  </p>
<pre><code>$str = &apos;hello world!&apos;;
</code></pre><p><strong>整型</strong>  </p>
<pre><code>$num = 10;
</code></pre><p><strong>浮点型</strong>  </p>
<pre><code>$float = 10.5;
</code></pre><p><strong>布尔型</strong>  </p>
<pre><code>$bool = true;
</code></pre><p><strong>数组</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/* </span></div><div class="line">* javascript: 数组定义方式 var arr = [1, 2, 3] </div><div class="line">* 取值: arr[0]、arr[1]、arr[1] </div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">/* </span></div><div class="line">* PHP 是这样定义数组的</div><div class="line">* 这种方式叫做**索引数组**</div><div class="line">* 取值: 定义方式和Javascript有区别，但是访问方式是一样的</div><div class="line">*/</div><div class="line"></div><div class="line">$arr = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);	</div><div class="line"></div><div class="line"><span class="keyword">echo</span> $arr[<span class="number">0</span>];</div><div class="line"><span class="keyword">echo</span> $arr[<span class="number">2</span>];</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* javascript: 对象定义 var obj = &#123;name: itcast, age: 10&#125;</div><div class="line">* 取值: obj.name  或 obj['name']</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">/* </span></div><div class="line">* PHP另一种定定数组的方式，所表达的意义和Javascript一样，</div><div class="line">* 只是语法格式不一样</div><div class="line">* 这种方式叫做**关联数组**</div><div class="line">* 取值: 也是通过下标形式取值,但不能用点取值</div><div class="line">*/</div><div class="line"></div><div class="line">$arr1 = <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'itcast'</span>, <span class="string">'age'</span>=&gt;<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="keyword">echo</span> $arr1[<span class="string">'name'</span>];</div><div class="line"><span class="keyword">echo</span> $arr1[<span class="string">'age'</span>];</div></pre></td></tr></table></figure>
<p><strong>对象</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* javascript </div><div class="line">* 构造函数:  function Person() &#123; this.name &#125; </div><div class="line">* 实例化:    var person = new Person();</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">/*              </span></div><div class="line">* PHP需要先创建一个类，下面就是创建过程</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> $name = <span class="string">'itcast'</span>;</div><div class="line">    <span class="keyword">public</span> $age = <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$person = <span class="keyword">new</span> Person;</div><div class="line"></div><div class="line"><span class="comment">/* PHP访问一个对象属性的语法是不一样的 */</span></div><div class="line"><span class="keyword">echo</span> $person-&gt;name;</div></pre></td></tr></table></figure></p>
<p><strong>NULL</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line">一种特殊的数据类型 ,没有为该变量设置任何值null,null和NULL是一样的</div><div class="line">未赋值的变量,则为null </div><div class="line">*/</div><div class="line"></div><div class="line">$foo;</div></pre></td></tr></table></figure></p>
<p><strong>单引号&amp;双引号区别： </strong> 单引号内部的变量不会执行双引号会执行</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$name = <span class="string">'小明'</span>;</div><div class="line"></div><div class="line"><span class="keyword">echo</span> <span class="string">'name is $name'</span>;   <span class="comment">//输出 name is $name</span></div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;br&gt;'</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">"name is $name"</span>;   <span class="comment">//输出 name is 小明</span></div></pre></td></tr></table></figure>
<h3 id="5-4-运算符-amp-3种内容输出"><a href="#5-4-运算符-amp-3种内容输出" class="headerlink" title="5.4 运算符 &amp; 3种内容输出"></a>5.4 运算符 &amp; 3种内容输出</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* 1.运算符基本与Javascript语法一致</div><div class="line">* 2.在php中 " + " 号只做数学去处,在javascript中为+号还可以拼接字符串</div><div class="line">* 3.在php中点号 " . " 表示字符串拼接符</div><div class="line">*/</div><div class="line"></div><div class="line">$name = <span class="string">"大雄"</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">'我的名字叫'</span>.$name</div></pre></td></tr></table></figure>
<p><strong> echo：输出简单数据类型，如字符串、数值 </strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">* echo 输出简单数据类型</div><div class="line">*/</div><div class="line"></div><div class="line">$str = <span class="string">'hello,world'</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">'我只能输出简单的数据比如:'</span>.$str;</div><div class="line"></div><div class="line">```  </div><div class="line">    </div><div class="line">print_r()：输出复杂数据类型，如数组</div><div class="line"></div><div class="line">```php</div><div class="line">$arr = <span class="keyword">array</span>(<span class="string">'daxiong'</span>, <span class="string">'今年'</span>, <span class="string">'10岁了'</span>);</div><div class="line"></div><div class="line"><span class="comment">//echo输出数组会出警告 </span></div><div class="line"><span class="keyword">echo</span> $arr;</div><div class="line"></div><div class="line"><span class="comment">//print_r可以打印数组，输出复杂数组的结构</span></div><div class="line">print_r($arr);</div></pre></td></tr></table></figure>
<p>var_dump()：输出详细信息，如对象、数组（了解）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$arr = <span class="keyword">array</span>(<span class="string">'daxiong'</span>, <span class="string">'今年'</span>, <span class="string">'10岁了'</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//输出详细信息,会输出复杂数据的结构,和类型 </span></div><div class="line">var_dump($arr);</div></pre></td></tr></table></figure>
<h3 id="5-5、函数"><a href="#5-5、函数" class="headerlink" title="5.5、函数"></a>5.5、函数</h3><ol>
<li>基本与javascript基本一致  </li>
<li>函数名对大小写不敏感  </li>
<li>默认参数（了解）  </li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">*1. PHP中函数不可以省略参数</div><div class="line">*2. PHP可以设置默认参数</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">($name=<span class="string">'web developer'</span>)</span> </span>&#123;</div><div class="line">	<span class="keyword">echo</span> $name . <span class="string">'你好!'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">sayHello();</div></pre></td></tr></table></figure>
<h3 id="5-6、分支，循环语句"><a href="#5-6、分支，循环语句" class="headerlink" title="5.6、分支，循环语句"></a>5.6、分支，循环语句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">* 分支控制语句、循环语句</div><div class="line">* 与Javascript一样</div><div class="line">* foreach 数组遍历函数，类似Javascript中的 for in</div><div class="line">*/</div><div class="line"></div><div class="line">$name = <span class="string">'itcast1'</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span>($name == <span class="string">'itcast'</span>) &#123;</div><div class="line">	<span class="keyword">echo</span> <span class="string">'我已经在'</span> . $name . <span class="string">'学习'</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="keyword">echo</span> <span class="string">'我还没有学习过编程'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*遍历索引数组*/</span></div><div class="line">$arr = <span class="keyword">array</span>(<span class="string">'itcast'</span>, <span class="string">'今年'</span>, <span class="string">'10岁了'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// PHP函数，计算数组的长度</span></div><div class="line">$length = count($arr);</div><div class="line"></div><div class="line"><span class="comment">// 用for循环遍历一个索引数组</span></div><div class="line"><span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;$length; $i++) &#123;</div><div class="line">	<span class="keyword">echo</span> $arr[$i];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 用foreach循环遍历一个索引数组</span></div><div class="line"><span class="keyword">foreach</span>($arr <span class="keyword">as</span> $k=&gt;$v) &#123;</div><div class="line">    <span class="keyword">echo</span> $k . <span class="string">'--&gt;'</span> . $v;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*遍历关联数组*/</span></div><div class="line">$arr1 = <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'itcast'</span>, <span class="string">'age'</span>=&gt;<span class="string">'10'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 验证关联数组不可以按索引下标来访问</span></div><div class="line"><span class="comment">// echo $arr1[0];</span></div><div class="line"></div><div class="line"><span class="comment">//用foreach遍历一个关联数组</span></div><div class="line"><span class="keyword">foreach</span>($arr1 <span class="keyword">as</span> $key=&gt;$val) &#123;</div><div class="line">	<span class="keyword">echo</span> $key . <span class="string">'--&gt;'</span> . $val;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="5-7、表单处理"><a href="#5-7、表单处理" class="headerlink" title="5.7、表单处理"></a>5.7、表单处理</h3><p>表单提交数据注意事项:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="number">1.</span> 表单form标签的action属性 ,用于设置接收数据的处理程序</div><div class="line"><span class="number">2.</span> 表单form标签的method属性 ,用于设置发送数据的方式</div><div class="line"><span class="number">3.</span> 表单input标签的name属性 ,是用于给后台区分是哪条数据项的. </div><div class="line"><span class="number">4.</span> 表单提交的按扭一定要是type=<span class="string">"submit"</span>类型,才能触发提交事件.</div><div class="line"><span class="number">5.</span> 当上传文件是需要设置 enctype=<span class="string">"multipart/form-data"</span>，而且只能post方式</div></pre></td></tr></table></figure></p>
<p>php后台接收数据:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 后台接收数据方式要与前台对应</div><div class="line">	$_GET   接收  get方式 传值</div><div class="line">	$_POST  接收  post方式 传值</div><div class="line">	$_FILES 接收文件上传  </div><div class="line"><span class="number">2.</span> 接收的超全局变量都是关系数组</div><div class="line"><span class="number">3.</span> 取值的key要与表单name属性对应</div></pre></td></tr></table></figure></p>
<p>get方式提交html代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></div><div class="line">	用户:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"uname"</span>/&gt;</span></div><div class="line">	密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"upass"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>post提交上传文件html代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></div><div class="line">   图片:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"image"</span>/&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"上传"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>保存上传文件</strong></p>
<blockquote>
<p>上传的临时文件,一会就会被自动删除,我们需要将其移动到保存的位置</p>
</blockquote>
<p>move_uploaded_file 函数<br>功能: 将上传的文件移动保存到指定位置<br>参数1:移动的文件<br>参数2:目标路径</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*将上传的文件保存*/</span></div><div class="line">move_uploaded_file($_FILES[<span class="string">'image'</span>][<span class="string">'tmp_name'</span>], <span class="string">'test.jpg'</span>);</div></pre></td></tr></table></figure>
<h3 id="5-8、文件导入-amp-amp-常用php函数"><a href="#5-8、文件导入-amp-amp-常用php函数" class="headerlink" title="5.8、文件导入&amp;&amp;常用php函数"></a>5.8、文件导入&amp;&amp;常用php函数</h3><p>文件导入</p>
<p>include 和 require 导入文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*导入template.html文件*/</span></div><div class="line">   <span class="keyword">include</span> <span class="string">'template.html'</span>;</div><div class="line"></div><div class="line"><span class="comment">/*导入data.php文件*/</span></div><div class="line">   <span class="keyword">require</span> <span class="string">'data.php'</span></div></pre></td></tr></table></figure>
<p>常用函数</p>
<pre><code>$array = array(
    &apos;username&apos;=&gt;&apos;itcast&apos;,
    &apos;password&apos;=&gt;&apos;123456&apos;
);

echo &apos;获取数组的长度：&apos;.count($array);
echo &apos;&lt;br&gt;&apos;;
echo &apos;判断是否在数组中：&apos;.in_array(&apos;itcast&apos;,$array);
echo &apos;&lt;br&gt;&apos;;
echo &apos;检测数组中是否存在key：&apos;.array_key_exists(&apos;username&apos;,$array);
</code></pre><h3 id="5-9、应用实例"><a href="#5-9、应用实例" class="headerlink" title="5.9、应用实例"></a>5.9、应用实例</h3><p>1、用户登录  </p>
<p>html页面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></div><div class="line">	用户:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"uname"</span>/&gt;</span></div><div class="line">	密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"upass"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>php页面：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    header(<span class="string">'Content-Type:text/html; charset=utf-8'</span>);</div><div class="line"></div><div class="line">    <span class="comment">/*数据库当中的数据*/</span></div><div class="line">    $userInfo = <span class="keyword">array</span>(</div><div class="line">        <span class="string">'username'</span>=&gt;<span class="string">'itcast'</span>,</div><div class="line">        <span class="string">'password'</span>=&gt;<span class="string">'123456'</span></div><div class="line">    );</div><div class="line"></div><div class="line">    <span class="comment">/*拿到提交过来的数据*/</span></div><div class="line">    $username = $_POST[<span class="string">'uname'</span>];</div><div class="line">    $password = $_POST[<span class="string">'upass'</span>];</div><div class="line"></div><div class="line">    <span class="comment">/*去匹配数据库当中的数据*/</span></div><div class="line">    <span class="keyword">if</span>($userInfo[<span class="string">'username'</span>] == $username &amp;&amp; $userInfo[<span class="string">'password'</span>] == $password)&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">'登录成功'</span>;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">'登录失败'</span>;</div><div class="line">    &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure></p>
<p>2、动态网站   </p>
<p><strong>京东首页</strong></p>
<p>index.php页面<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    header(<span class="string">'Content-Type:text/html; charset=utf-8'</span>);</div><div class="line">	<span class="comment">//1.准备数据</span></div><div class="line">    $products = <span class="keyword">array</span>(</div><div class="line">        <span class="keyword">array</span>(</div><div class="line">        <span class="string">'imgUrl'</span>=&gt;<span class="string">'images/detail01.jpg'</span>,</div><div class="line">        <span class="string">'newPrice'</span>=&gt;<span class="string">'15.00'</span>,</div><div class="line">        <span class="string">'oldPrice'</span>=&gt;<span class="string">'19.00'</span></div><div class="line">        ),</div><div class="line">        <span class="keyword">array</span>(</div><div class="line">        <span class="string">'imgUrl'</span>=&gt;<span class="string">'images/detail02.jpg'</span>,</div><div class="line">        <span class="string">'newPrice'</span>=&gt;<span class="string">'133.00'</span>,</div><div class="line">        <span class="string">'oldPrice'</span>=&gt;<span class="string">'234.00'</span></div><div class="line">        ),</div><div class="line">        <span class="keyword">array</span>(</div><div class="line">        <span class="string">'imgUrl'</span>=&gt;<span class="string">'images/detail01.jpg'</span>,</div><div class="line">        <span class="string">'newPrice'</span>=&gt;<span class="string">'340.00'</span>,</div><div class="line">        <span class="string">'oldPrice'</span>=&gt;<span class="string">'1432.00'</span></div><div class="line">        )</div><div class="line">    );</div><div class="line">	<span class="comment">//2.导入模板</span></div><div class="line">    <span class="keyword">include</span> <span class="string">'index.html'</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure></p>
<p>index.html页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!--掌上秒杀的内容是会更新的而且是后台更新--&gt;</div><div class="line">&lt;ul class="sk_product"&gt;</div><div class="line">	</div><div class="line">	&lt;!-- 3.把数据和模板绑定(动态渲染),  php的拆分语法 --&gt;</div><div class="line">    &lt;?php foreach($products as $key =&gt; $val)&#123; ?&gt;</div><div class="line">	</div><div class="line">        &lt;li&gt;</div><div class="line">            &lt;a href="#"&gt;&lt;img src="&lt;?php echo $val['imgUrl'] ?&gt;" alt=""/&gt;&lt;/a&gt;</div><div class="line">            &lt;p class="new_price"&gt;&amp;yen;&lt;?php echo $val['newPrice'] ?&gt;&lt;/p&gt;</div><div class="line">            &lt;p class="old_price"&gt;&amp;yen;&lt;?php echo $val['oldPrice'] ?&gt;&lt;/p&gt;</div><div class="line">        &lt;/li&gt;</div><div class="line">    &lt;?php &#125; ?&gt;</div><div class="line"></div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<p><strong>京东分类</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">category.php页面：</div><div class="line">	</div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">header(<span class="string">'Content-Type:text/html; charset=utf-8'</span>);</div><div class="line"></div><div class="line"><span class="comment">//1.准备数据</span></div><div class="line">$category = <span class="keyword">array</span>(</div><div class="line">    <span class="string">'热门推荐'</span>,</div><div class="line">    <span class="string">'潮流女装'</span>,</div><div class="line">    <span class="string">'品牌男装'</span>,</div><div class="line">    <span class="string">'内衣配饰'</span>,</div><div class="line">    <span class="string">'家用电器'</span>,</div><div class="line">    <span class="string">'电脑办公'</span>,</div><div class="line">    <span class="string">'手机数码'</span>,</div><div class="line">    <span class="string">'母婴频道'</span>,</div><div class="line">    <span class="string">'图书'</span>,</div><div class="line">    <span class="string">'家居家纺'</span>,</div><div class="line">    <span class="string">'居家生活'</span>,</div><div class="line">    <span class="string">'家具建材'</span>,</div><div class="line">    <span class="string">'热门推荐'</span>,</div><div class="line">    <span class="string">'潮流女装'</span>,</div><div class="line">    <span class="string">'品牌男装'</span>,</div><div class="line">    <span class="string">'内衣配饰'</span>,</div><div class="line">    <span class="string">'家用电器'</span>,</div><div class="line">    <span class="string">'电脑办公'</span>,</div><div class="line">    <span class="string">'手机数码'</span>,</div><div class="line">    <span class="string">'母婴频道'</span>,</div><div class="line">    <span class="string">'居家生活'</span>,</div><div class="line">    <span class="string">'手机数码'</span>,</div><div class="line">    <span class="string">'母婴频道'</span>,</div><div class="line">    <span class="string">'图书'</span>,</div><div class="line">    <span class="string">'家居家纺'</span>,</div><div class="line">    <span class="string">'居家生活'</span>,</div><div class="line">    <span class="string">'潮流女装'</span>,</div><div class="line">    <span class="string">'家具建材'</span>,</div><div class="line">    <span class="string">'热门推荐'</span>,</div><div class="line">    <span class="string">'潮流女装'</span>,</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">//2.导入模板页面</span></div><div class="line"><span class="keyword">include</span> <span class="string">'category.html'</span>;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>category.html页面：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;!--左侧分类--&gt;</div><div class="line">&lt;div class="jd_cate_left"&gt;</div><div class="line">    &lt;ul&gt;</div><div class="line">		&lt;!-- 3.把数据和模板绑定(动态渲染),  php的拆分语法 --&gt;</div><div class="line">        &lt;?php foreach($category as $key=&gt;$val)&#123; ?&gt;</div><div class="line">            &lt;li class="&lt;?php echo $key==1?'now':'' ?&gt;"&gt;&lt;a href="javascript:;"&gt;&lt;?php echo $val ?&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">        &lt;?php &#125; ?&gt;</div><div class="line">    &lt;/ul&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<p><strong>后面课程中会用到的php函数（不用记）</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">move_uploaded_file    将上传的文件移到新的位置</div><div class="line"></div><div class="line">count        计算数组长度</div><div class="line">in_array     值是否在数组中</div><div class="line">array_push   往数据中追加一个元素</div><div class="line">array_rand   随机取出数据中一个元素的索引值</div><div class="line">array_key_exists   检测数组中是否存在key</div><div class="line"></div><div class="line">file_get_contents    读取文件</div><div class="line">file_put_contents    写入文件</div><div class="line"></div><div class="line">json_decode    将json格式的字符串,进行解码成php的数组或对象</div><div class="line">json_encode    将php的数组或对象,进行编码转成json格式的字符串</div></pre></td></tr></table></figure>
<h2 id="6、网络传输协议"><a href="#6、网络传输协议" class="headerlink" title="6、网络传输协议"></a>6、网络传输协议</h2><h3 id="6-1、如何理解协议？"><a href="#6-1、如何理解协议？" class="headerlink" title="6.1、如何理解协议？"></a>6.1、如何理解协议？</h3><blockquote>
<p>双方要共同遵守的一些约定。目的：租到房子，贷到款</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">我要租房 ---&gt; 租房协议 ---&gt; 我和房东的约定</div><div class="line">我要贷款 ---&gt; 货款协议 ---&gt; 我和贷款公司约定</div></pre></td></tr></table></figure>
<h3 id="6-1、常见网络传输协议"><a href="#6-1、常见网络传输协议" class="headerlink" title="6.1、常见网络传输协议"></a>6.1、常见网络传输协议</h3><blockquote>
<p>网络传输协议：客户端与服务器端的约定。目的：传输信息，怎么传</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">HTTP、HTTPS 超文本传输协议 </div><div class="line">FTP 文件传输协议</div><div class="line">SMTP 简单邮件传输协议</div></pre></td></tr></table></figure>
<h3 id="6-2、http协议"><a href="#6-2、http协议" class="headerlink" title="6.2、http协议"></a>6.2、http协议</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">超文本传输协议（HTTP，HyperText Transfer Protocol) 网站是基于HTTP协议的，</div><div class="line">例如网站的图片、CSS、JS等都是基于HTTP协议进行传输的。</div></pre></td></tr></table></figure>
<blockquote>
<p>http请求: 浏览器到服务器要文件或数据,服务器返回文件或数据的过程.<br>http协议：浏览器和服务器的约定。要数据规范,和返回数据的规范.</p>
</blockquote>
<p><img src="./imgs/m_13.png" alt=""></p>
<blockquote>
<p>小白: 这么说http协议有两部分约定组成,是哪两部分呢?<br>大神: 请求报文和响应报文.<br>小白: 如何查看呢?<br>大神: 可以通过谷歌浏览器 f12 可查看到请求</p>
</blockquote>
<h4 id="6-2-1、请求和请求报文"><a href="#6-2-1、请求和请求报文" class="headerlink" title="6.2.1、请求和请求报文"></a>6.2.1、请求和请求报文</h4><p>请求:由浏览器客户端发起<br>格式:请求行、请求头、请求主体。</p>
<ul>
<li><p><strong>1、请求行</strong></p>
<blockquote>
<p>由请求方式、请求URL和协议版本构成<br>  常用请求方法 <strong>POST</strong>、<strong>GET</strong>、PUT、DELETE</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">GET /day01/code/login.php?username=123&amp;password=123 HTTP/1.1</div><div class="line">POST /day01/code/login.php HTTP/1.1</div></pre></td></tr></table></figure>
</li>
<li><p><strong>2、请求头</strong></p>
<blockquote>
<p>注：当以post形式提交表单的时候，请求头里会设置<br>  Content-Type: application/x-www-form-urlencoded</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Host：127.0.0.1             请求的主机</div><div class="line">Cache-Control：max-age=0    控制缓存</div><div class="line">Accept：*/*                 接受的文档MIME类型</div><div class="line">User-Agent：                浏览器信息</div><div class="line">Referer：                   从哪个URL跳转过来的</div><div class="line">Accept-Encoding：           可接受的压缩格式</div><div class="line">If-None-Match：             记录服务器响应用于控制缓存 (是由服务器自动生成的)</div><div class="line">If-Modified-Since：         记录文件修改 (是由服务器自动生成的)</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>3、请求主体</strong></p>
<blockquote>
<p>即传递给服务端的数据, 格式: name=value&amp;age=18</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">post请求数据放在请求体中</div><div class="line">get请求没有请求主体</div></pre></td></tr></table></figure>
</li>
<li><p><strong>请求报文示例图</strong>:</p>
<blockquote>
<p>GET方式: <img src="./imgs/get_01.png" alt="http协议_get"></p>
<p>POST方式: <img src="./imgs/post_01.png" alt="http协议_post"></p>
</blockquote>
</li>
</ul>
<h4 id="6-2-2、-响应和响应报文"><a href="#6-2-2、-响应和响应报文" class="headerlink" title="6.2.2、 响应和响应报文"></a>6.2.2、 响应和响应报文</h4><p>响应:由服务器端发起<br>格式:状态行、响应头、响应主体。</p>
<ul>
<li><p><strong>1、状态行</strong></p>
<blockquote>
<p>由协议版本号、状态码和状态信息构成<br>状态码: 常见的有200代表成功、304文档未修改、403没有权限、404未找到、500服务器错误</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 200 OK</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>2、响应头</strong></p>
<blockquote>
<p>响应的数据也有一个content-type属性,内容与我们设置的header()函数中的内容一致<br>该函数用告诉浏览如何解释服务给把返回的数据.</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Date：			响应时间</div><div class="line">Server：			服务器信息</div><div class="line">Last-Modified：	资源最后修改时间 由服务器自动生成</div><div class="line">ETag：			资源修改后生成的唯一标识由服务器自动生成</div><div class="line">Content-Length：响应主体长度</div><div class="line">Content-Type：	响应资源的类型</div></pre></td></tr></table></figure>
</li>
<li><p><strong>3、响应主体</strong></p>
<p>  即服务端返回给客户端的内容；</p>
</li>
</ul>
<ul>
<li><p><strong>响应报文示例图</strong></p>
<blockquote>
<p>响应报文不区分方式:<br><img src="./imgs/response_01.png" alt="http协议_响应"><br>状态码值参考：<br><img src="imgs/statusCode.png" alt="http协议_状态码"></p>
</blockquote>
</li>
</ul>
<h3 id="6-3-谷歌浏览器中查看请求报文与响应报文"><a href="#6-3-谷歌浏览器中查看请求报文与响应报文" class="headerlink" title="6.3 谷歌浏览器中查看请求报文与响应报文"></a>6.3 谷歌浏览器中查看请求报文与响应报文</h3><p>步骤：f12开发者工具 —&gt; Network —&gt; All</p>
<p><img src="./imgs/m_14.png" alt="http协议_查看"></p>
<h2 id="7-AJAX编程"><a href="#7-AJAX编程" class="headerlink" title="7 AJAX编程"></a>7 AJAX编程</h2><blockquote>
<p>问:什么是ajax,有什么作用?<br>答:</p>
<ol>
<li>英文: Asynchronous Javascript And XML</li>
<li>AJAX 是一种通信技术简称,并不是一门的新的语言，而是对现有技术的综合利用。</li>
<li>本质:是在HTTP协议的基础上以异步的方式与服务器进行通信。</li>
<li>作用:实现浏览器和服务器之间异步交换数据.</li>
</ol>
</blockquote>
<h3 id="7-1-异步-amp-同步"><a href="#7-1-异步-amp-同步" class="headerlink" title="7.1  异步&amp;同步"></a>7.1  异步&amp;同步</h3><p>如何理解同步和异步概念?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- 同步: 指的就是事情要一件一件做。等做完前一件才能做后一件任务</div><div class="line">- 异步: 不受当前任务的影响，两件事情同时进行，做一件事情时，不影响另一件事情的进行。</div></pre></td></tr></table></figure></p>
<p><img src="./imgs/async_time.png" alt="异步图片"></p>
<blockquote>
<p>异步在编程中体现: 异步程序代码执行时不会阻塞其它程序代码执行,从而提升整体执行效率。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">网页异步应用案例：</div><div class="line">1. 验证你的用户名是否已经存在（一边输入，一边获取你的信息，和后台比对）。</div><div class="line">2. 百度搜索提示，及相关内容展示（一边输入，一边找出了你可能要的内容）。</div><div class="line">3. 新浪微博自动加载（一边滚动，一边加了新的一页数据给你）。</div></pre></td></tr></table></figure>
<blockquote>
<p>问: 在js中如何书写异步程序?<br>答: 在js中可以用 XMLHttpRequest 书写异步的处理程序。<br>问: 使用该对象像书写的程序有什么优点<br>答: 我们便可实现对网页的部分更新，而不是刷新整个页面</p>
</blockquote>
<h3 id="7-2、-XMLHttpRequest"><a href="#7-2、-XMLHttpRequest" class="headerlink" title="7.2、 XMLHttpRequest"></a>7.2、 XMLHttpRequest</h3><p>使用XMLHttpRequest示例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/*javascript内置的http请求对象  XMLHttpRequest*/</span></div><div class="line"></div><div class="line"><span class="comment">/*1.初始化对象*/</span></div><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</div><div class="line"></div><div class="line"><span class="comment">/*2.设置请求报文*/</span></div><div class="line"></div><div class="line"><span class="comment">/*请求的行*/</span></div><div class="line">xhr.open(<span class="string">'post'</span>,<span class="string">'01.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">/*请求头*/</span></div><div class="line"><span class="comment">/*get 没有必要设置*/</span></div><div class="line"><span class="comment">/*post必须设置 Content-Type: application/x-www-form-urlencoded */</span></div><div class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</div><div class="line"></div><div class="line"><span class="comment">/*请求主体,并发出请求*/</span></div><div class="line">xhr.send(<span class="string">"name=xjj&amp;age=10"</span>);</div></pre></td></tr></table></figure>
<h4 id="7-2-1、请求代码"><a href="#7-2-1、请求代码" class="headerlink" title="7.2.1、请求代码"></a>7.2.1、请求代码</h4><blockquote>
<p>HTTP请求3个组成部分（请求报文）与XMLHttpRequest方法的对应关系</p>
</blockquote>
<p><strong>注意书写顺序</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 请求行</div><div class="line">xhr.open(<span class="string">'post'</span>,<span class="string">'01.php'</span>);</div><div class="line"></div><div class="line"><span class="number">2.</span> 请求头 ,get请求可以不设置</div><div class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</div><div class="line"></div><div class="line"><span class="number">3.</span> 请求主体 ,get请求传<span class="literal">null</span> </div><div class="line">xhr.send(<span class="string">"name=xjj&amp;age=10"</span>);</div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line">    </div><div class="line"></div><div class="line">    </div><div class="line">    </div><div class="line">#### 7.2.2、响应代码</div><div class="line"></div><div class="line">&gt; 因为服务器做出响应需要时间（比如网速慢等原因），所以我们需要等整个请求响应过程完成后，然后才能进行接收响应的内容。</div><div class="line"></div><div class="line"></div><div class="line">**onreadystatechange 监听请求响应事件  readyState 状态**</div><div class="line"></div><div class="line">&gt; onreadystatechange：是监听整个请求响应过程,会被多次触发.</div><div class="line">&gt; readyState： 记录XMLHttpRequest对象,当前的工作状态.</div><div class="line"></div><div class="line">`<span class="string">``</span>javascript</div><div class="line"><span class="number">0</span>：请求未初始化（还没有调用 open()）。  </div><div class="line"><span class="number">1</span>：请求已经建立，但是还没有发送（还没有调用 send()）。  </div><div class="line"><span class="number">2</span>：请求已发送，正在处理中（通常现在可以从响应中获取内容头）。  </div><div class="line"><span class="number">3</span>：请求在处理中；通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成。  </div><div class="line"><span class="number">4</span>：响应已完成；您可以获取并使用服务器的响应了。</div><div class="line"></div><div class="line"><span class="comment">/*其实我们只关心请求完成后的事*/</span></div><div class="line"><span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> )&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'响应已完成'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>HTTP响应3个组成部分（响应报文）与XMLHttpRequest方法或属性的对应关系。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 获取状态行（包括状态码&amp;状态信息）</div><div class="line">xhr.status 状态码</div><div class="line">xhr.statusText 状态码信息</div><div class="line"></div><div class="line"><span class="number">2.</span> 获取响应头</div><div class="line">xhr.getResponseHeader(<span class="string">'Content-Type'</span>);</div><div class="line">xhr.getAllResponseHeaders();</div><div class="line"></div><div class="line"><span class="number">3.</span> 响应主体   </div><div class="line">xhr.responseText</div><div class="line">xhr.responseXML</div><div class="line"></div><div class="line"><span class="string">``</span><span class="string">`  </span></div><div class="line"></div><div class="line"></div><div class="line">    </div><div class="line">#### 7.3.3 API详解</div><div class="line"></div><div class="line">    xhr.open() 					//发起请求，可以是get、post方式</div><div class="line">    xhr.setRequestHeader()		//设置请求头</div><div class="line">    xhr.send() 					//发送请求主体，get方式可传null</div><div class="line"></div><div class="line">    xhr.onreadystatechange = function () &#123;&#125;  		//监听请求响应过程状态</div><div class="line">	xhr.readyState 				//记录请求响应过程状态</div><div class="line"></div><div class="line">    xhr.status					//表示响应状态码，如200</div><div class="line">    xhr.statusText				//表示响应状态信息，如OK</div><div class="line">    xhr.getAllResponseHeaders() 		//获取全部响应头信息</div><div class="line">    xhr.getResponseHeader('key') 		//获取指定头信息</div><div class="line">    xhr.responseText、			//以普通网页字符串形式,接收响应主体</div><div class="line">	xhr.responseXML				//以xml文档形式,接收响应主体</div><div class="line"> </div><div class="line">我们需要检测并判断响应头的MIME类型后确定使用request.responseText或者request.responseXML</div><div class="line"></div><div class="line"></div><div class="line"> 注：GET和POST请求方式的差异（面试题）</div><div class="line"> </div><div class="line"> 1. GET没有请求主体，使用xhr.send(null)</div><div class="line"> 2. GET可以通过在请求URL上添加请求参数</div><div class="line"> 3. POST可以通过xhr.send('name=itcast&amp;age=10')传数据</div><div class="line"> 4. POST需要设置content-type属性.</div><div class="line"> 5. GET效率更好（应用多）</div><div class="line"> 6. GET大小限制约4K，POST则没有限制</div><div class="line"> </div><div class="line"> </div><div class="line"></div><div class="line"></div><div class="line">&gt; 问：我有一个php商品数组数据,应该如何传递给前台显示呢？</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">### 7.4、 XML</div><div class="line"></div><div class="line">为什么要学XML?</div><div class="line">&gt; 需求:开发语言多，各语言变量类型都不一样，需要一种通用的数据格式做信息交换。XML就是用来在前后台传输复杂数据。它们特点具有自我描述性（固定的格式的数据）</div><div class="line"></div><div class="line"></div><div class="line">什么是 XML?</div><div class="line"></div><div class="line">* XML 指可扩展标记语言（EXtensible Markup Language）</div><div class="line">* XML 是一种标记语言，很类似 HTML</div><div class="line">* XML 的设计宗旨是传输数据，而非显示数据</div><div class="line">* XML 标签没有被预定义。您需要自行定义标签。</div><div class="line"></div><div class="line">语法规范：</div><div class="line"></div><div class="line">1. 第一行必须是版本信息</div><div class="line">2. 必须有一个根元素（有且仅有一个）  </div><div class="line">3. 标签不可有空格、不可以数字或.开头、大小写敏感 </div><div class="line">4. 不可交叉嵌套，都是双标签</div><div class="line">5. 属性双引号（浏览器自动修正成双引号了）  </div><div class="line">6. 特殊符号要使用实体  </div><div class="line">7. 注释和HTML一样  </div><div class="line"></div><div class="line">   </div><div class="line">xml文件:</div><div class="line"></div><div class="line">`<span class="string">``</span>xml </div><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span> ?&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">src</span>&gt;</span>images/detail01.jpg<span class="tag">&lt;/<span class="name">src</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">oldPrice</span>&gt;</span>180<span class="tag">&lt;/<span class="name">oldPrice</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">nowPrice</span>&gt;</span>130<span class="tag">&lt;/<span class="name">nowPrice</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">src</span>&gt;</span>images/detail02.jpg<span class="tag">&lt;/<span class="name">src</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">oldPrice</span>&gt;</span>180<span class="tag">&lt;/<span class="name">oldPrice</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">nowPrice</span>&gt;</span>120&amp;lt;&amp;gt;<span class="tag">&lt;/<span class="name">nowPrice</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">src</span>&gt;</span>images/detail03.jpg<span class="tag">&lt;/<span class="name">src</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">oldPrice</span>&gt;</span>180<span class="tag">&lt;/<span class="name">oldPrice</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">nowPrice</span>&gt;</span>110<span class="tag">&lt;/<span class="name">nowPrice</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></div><div class="line">&lt;!-- </div><div class="line"><span class="number">1.</span>第一行必须写xml的头</div><div class="line"><span class="number">2.</span>必须有一个根元素</div><div class="line"><span class="number">3.</span>标签必须成对出现</div><div class="line"><span class="number">4.</span>标签不能以数字开头特殊字符要实，字符实体</div><div class="line">--&gt;</div></pre></td></tr></table></figure>
<p>php文件:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">    header(<span class="string">'Content-Type:text/xml;charset=utf-8'</span>);</div><div class="line">    <span class="comment">/*以xml格式传输数据的时候要求响应内容格式是   text/xml*/</span></div><div class="line"></div><div class="line">    <span class="comment">/*file_get_contents 获取文件内容*/</span></div><div class="line">    $xml = file_get_contents(<span class="string">'01.data.xml'</span>);</div><div class="line"></div><div class="line">    <span class="comment">/*输出xml内容*/</span></div><div class="line">    <span class="keyword">echo</span> $xml;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>javascript文件:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">   xhr.open(<span class="string">'get'</span>,<span class="string">'01.xml_table.php'</span>);</div><div class="line">   xhr.send(<span class="literal">null</span>);</div><div class="line"></div><div class="line">   xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</div><div class="line">           <span class="comment">/*获取的是字符串xhr.responseText*/</span></div><div class="line">           <span class="comment">// console.log(xhr.responseText);</span></div><div class="line">           <span class="comment">/*获取xml格式文档 xhr.responseXML*/</span></div><div class="line">           <span class="comment">//console.log(xhr.responseXML);</span></div><div class="line"></div><div class="line">           <span class="comment">/*把数据添加到页面*/</span></div><div class="line">           <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line">           <span class="keyword">var</span> items = xhr.responseXML.querySelectorAll(<span class="string">'item'</span>);</div><div class="line">           <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;items.length; i++)&#123;</div><div class="line">               <span class="keyword">var</span> item = items[i];</div><div class="line">               <span class="keyword">var</span> src = item.querySelector(<span class="string">'src'</span>).innerHTML;</div><div class="line">               <span class="keyword">var</span> oldPrice = item.querySelector(<span class="string">'oldPrice'</span>).innerHTML;</div><div class="line">               <span class="keyword">var</span> nowPrice = item.querySelector(<span class="string">'nowPrice'</span>).innerHTML;</div><div class="line"></div><div class="line">               <span class="comment">/*拼接模板*/</span></div><div class="line">               html += <span class="string">'&lt;tr&gt;'</span>;</div><div class="line">               html += <span class="string">'&lt;td&gt;'</span>+i+<span class="string">'&lt;/td&gt;'</span>;</div><div class="line">               html += <span class="string">'&lt;td&gt;'</span>+src+<span class="string">'&lt;/td&gt;'</span>;</div><div class="line">               html += <span class="string">'&lt;td&gt;'</span>+oldPrice+<span class="string">'&lt;/td&gt;'</span>;</div><div class="line">               html += <span class="string">'&lt;td&gt;'</span>+nowPrice+<span class="string">'&lt;/td&gt;'</span>;</div><div class="line">               html += <span class="string">'&lt;/tr&gt;'</span></div><div class="line">               </div><div class="line">           &#125;</div><div class="line">           <span class="comment">/*添加到表格中*/</span></div><div class="line">           <span class="built_in">document</span>.querySelector(<span class="string">'tbody'</span>).innerHTML = html;</div><div class="line"></div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>XML虽然可以描述和传输复杂数据，但是其<strong>解析过于复杂</strong>并且<strong>体积较大</strong>，所以实现开发已经很少使用了。</p>
</blockquote>
<h3 id="7-5-JSON"><a href="#7-5-JSON" class="headerlink" title="7.5  JSON"></a>7.5  JSON</h3><p>即 JavaScript Object Notation，另一种<strong>轻量级</strong>的文本数据交换格式，<strong>独立于语言</strong>,取值更方便。</p>
<ol>
<li>数据在名称/值对中  </li>
<li>数据由逗号分隔(最后一个健/值对不能带逗号)  </li>
<li>花括号保存对象，方括号保存数组  </li>
<li>键值都要使用双引号  </li>
<li>文件中不能写注释</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">  &#123;<span class="attr">"src"</span>:<span class="string">"images/detail01.jpg"</span>,<span class="attr">"oldPrice"</span>:<span class="string">"10.12"</span>,<span class="attr">"newPrice"</span>:<span class="string">"130.00"</span>&#125;,</div><div class="line">  &#123;<span class="attr">"src"</span>:<span class="string">"images/detail02.jpg"</span>,<span class="attr">"oldPrice"</span>:<span class="string">"1.00"</span>,<span class="attr">"newPrice"</span>:<span class="string">"11.00"</span>&#125;,</div><div class="line">  &#123;<span class="attr">"src"</span>:<span class="string">"images/detail03.jpg"</span>,<span class="attr">"oldPrice"</span>:<span class="string">"100.00"</span>,<span class="attr">"newPrice"</span>:<span class="string">"1000.00"</span>&#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>JSON数据在不同语言进行传输时，类型为字符串，不同的语言各自也都对应有解析方法，需要解析完成后才能读取</p>
<p><strong>PHP解析方法</strong>  </p>
<ul>
<li>json_encode() ：将php数组、对象转化成json字符</li>
<li>json_decode() ：将json字符转化成php数组、对象</li>
</ul>
<p>示例代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">    header(<span class="string">'Content-Type:text/html;charset=utf-8'</span>);</div><div class="line">    <span class="comment">/*以json格式传输数据的时候要求响应内容格式是   application/json*/</span></div><div class="line">    <span class="comment">/*注意也可以不设置  但是这遵循的一个规范*/</span></div><div class="line"></div><div class="line">    <span class="comment">/*file_get_contents 获取文件内容*/</span></div><div class="line">    $json = file_get_contents(<span class="string">'01.data.json'</span>);</div><div class="line"></div><div class="line">    <span class="comment">/*输出json内容*/</span></div><div class="line">    <span class="keyword">echo</span> $json;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br&gt;&lt;br&gt;'</span>;</div><div class="line"></div><div class="line">    $array = <span class="keyword">array</span>(</div><div class="line">        <span class="keyword">array</span>(<span class="string">'src'</span>=&gt;<span class="string">'images/detail01.jpg'</span>,<span class="string">'newPrice'</span>=&gt;<span class="string">'12.00'</span>,<span class="string">'oldPrice'</span>=&gt;<span class="string">'455.00'</span>),</div><div class="line">        <span class="keyword">array</span>(<span class="string">'src'</span>=&gt;<span class="string">'images/detail02.jpg'</span>,<span class="string">'newPrice'</span>=&gt;<span class="string">'65.00'</span>,<span class="string">'oldPrice'</span>=&gt;<span class="string">'878.00'</span>),</div><div class="line">        <span class="keyword">array</span>( <span class="string">'src'</span>=&gt;<span class="string">'images/detail01.jpg'</span>,<span class="string">'newPrice'</span>=&gt;<span class="string">'100.00'</span>,<span class="string">'oldPrice'</span>=&gt;<span class="string">'1000.00'</span>)</div><div class="line">    );</div><div class="line"></div><div class="line">    <span class="comment">/*php: json_encode 将php数组转化成json字符*/</span></div><div class="line">    $json_array = json_encode($array);</div><div class="line">    <span class="keyword">echo</span> $json_array;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br&gt;&lt;br&gt;'</span>;</div><div class="line"></div><div class="line">    <span class="comment">/*php: json_decode 将json字符转化成php数组*/</span></div><div class="line">    $array_json = json_decode($json_array);</div><div class="line">    <span class="keyword">echo</span> $array_json;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br&gt;&lt;br&gt;'</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong> Javascript 解析方法</strong>  </p>
<p>JSON对象  </p>
<ul>
<li>JSON.parse() ：将json格式字符串 转化成 javascript数组、对象</li>
<li>JSON.stringify()：将javascript数组、对象 转化成 json格式字符串 </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/*声明数组对象*/</span></div><div class="line"><span class="keyword">var</span> products = [</div><div class="line">     &#123;</div><div class="line">         <span class="attr">src</span>:<span class="string">'images/detail01.jpg'</span>,</div><div class="line">         <span class="attr">oldPrice</span>:<span class="string">'120'</span>,</div><div class="line">         <span class="attr">nowPrice</span>:<span class="string">'90'</span></div><div class="line">     &#125;,</div><div class="line">     &#123;</div><div class="line">         <span class="attr">src</span>:<span class="string">'images/detail02.jpg'</span>,</div><div class="line">         <span class="attr">oldPrice</span>:<span class="string">'120'</span>,</div><div class="line">         <span class="attr">nowPrice</span>:<span class="string">'90'</span></div><div class="line">     &#125;,</div><div class="line">     &#123;</div><div class="line">         <span class="attr">src</span>:<span class="string">'images/detail03.jpg'</span>,</div><div class="line">         <span class="attr">oldPrice</span>:<span class="string">'120'</span>,</div><div class="line">         <span class="attr">nowPrice</span>:<span class="string">'90'</span></div><div class="line">     &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="comment">/*javascript: JSON.stringify 将js对象转为json格式字符串*/</span></div><div class="line"><span class="keyword">var</span> obj2str = <span class="built_in">JSON</span>.stringify(products)</div><div class="line"><span class="built_in">console</span>.log(obj2str);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj2str);</div><div class="line"></div><div class="line"><span class="comment">/*javascript: JSON.parse 将js对象转为json格式字符串*/</span></div><div class="line"><span class="keyword">var</span> str2obj = <span class="built_in">JSON</span>.parse(obj2str);</div><div class="line"><span class="built_in">console</span>.log(str2obj);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str2obj);</div></pre></td></tr></table></figure>
<blockquote>
<p>注意: 如果要兼容老版本浏览器,可使用json2.js 文件<br>总结：JSON体积小、解析方便且高效，在实际开发成为首选。</p>
</blockquote>
<h3 id="7-6、-xhr对象兼容性"><a href="#7-6、-xhr对象兼容性" class="headerlink" title="7.6、 xhr对象兼容性"></a>7.6、 xhr对象兼容性</h3><p><strong>关于IE的兼容方面，了解即可。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">XHR</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> xhr;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*如果 try内的程序运行错误  抛出异常  捕捉异常  上面程序当中运行的错误*/</span></div><div class="line">    <span class="keyword">catch</span>(e) &#123;</div><div class="line">        <span class="comment">/*在不同的IE版本下初始  ActiveXObject  需要传入的标识*/</span></div><div class="line">        <span class="keyword">var</span> IEXHRVers =[<span class="string">"Msxml3.XMLHTTP"</span>,<span class="string">"Msxml2.XMLHTTP"</span>,<span class="string">"Microsoft.XMLHTTP"</span>];</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;IEXHRVers.length;i++) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                xhr = <span class="keyword">new</span> ActiveXObject(IEXHRVers[i]);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">catch</span>(e) &#123;</div><div class="line">                <span class="comment">/*如果出现错误的时候  停止当次的循环*/</span></div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> xhr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="7-7-封装ajax工具函数"><a href="#7-7-封装ajax工具函数" class="headerlink" title="7.7  封装ajax工具函数"></a>7.7  封装ajax工具函数</h3><p><strong>目的：不想做重复的工作，书写重复代码。*</strong></p>
<p>分析使用步骤:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1. 建立XMLHttpRequest对象</div><div class="line">2. 使用open方法设置交互的基本信息,打开和服务器连接</div><div class="line">3. 使用send方法设置发送，开始和服务器端交互</div><div class="line">4. 注册状态监听的onreadystatechange回调函数</div></pre></td></tr></table></figure></p>
<p><strong>封装步骤</strong></p>
<p>步骤1：分析参数（提取会变的为参数）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">* 请求方式</div><div class="line">* 请求地址</div><div class="line">* 是同步还是异步</div><div class="line">* 传递的数据</div><div class="line">* 响应成功处理函数</div><div class="line">* 响应失败的处理函数</div></pre></td></tr></table></figure></p>
<p>步骤2：利用对象优化参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function ajax(type,url,data,success)&#123;</div><div class="line">	//这种写法不好，参数固定，要记忆参数顺序和类型。不方便后期的使用</div><div class="line">	console.log(type);</div><div class="line">	console.log(url);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function ajax(options)&#123;</div><div class="line">	// 优势：不再关注参数的顺序，方便参数类型和顺序的扩展</div><div class="line">	console.log( options.type );</div><div class="line">	console.log( options.url );</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>步骤3：处理POST与GET差异<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">* POST数据不放在URL上，GET请求数据添加在URL后面</div><div class="line">* POST请求必须要设置Content-type属性，GET请求则可以省略</div><div class="line">* POST请求体放在Send方法里。而GET没有请求体可以设为null</div></pre></td></tr></table></figure></p>
<p>步骤4：命名空间使用，不和其他人封装的函数起冲突（被覆盖）</p>
<p><strong>封装示例代码</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 封装ajax工具方法</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 第1步：分析参数</div><div class="line"> * </div><div class="line"> * 主要的参数       参数名       类型          默认值            取值范围 </div><div class="line"> * 1.请求方式       type        字符串         get             get/post</div><div class="line"> * 2.请求地址       url         字符串         当前地址         后台处理的文件</div><div class="line"> * 3.传递的数       data         对象          &#123;&#125;               &#123;name:jack,age:18&#125;   ===&gt; name&amp;jack&amp;age=18</div><div class="line"> * 4.是否异步       async       布尔值         true            true/false</div><div class="line"> * </div><div class="line"> * 响应</div><div class="line"> * 6.成功回掉       success     函数          -             响应成功后如何处理数据</div><div class="line"> * 7.失败回掉       error       函数          -             响应失败后如何处理</div><div class="line"> * </div><div class="line"> */</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 第2步：优化传参   </div><div class="line"> * </div><div class="line"> * 要记忆参数顺序，调用麻烦</div><div class="line"> * function ajax(type,url,data,async,success,eror)&#123;&#125;    </div><div class="line"> *   </div><div class="line"> * function ajax(options)&#123;&#125;                 </div><div class="line"> * </div><div class="line"> * var options = &#123;</div><div class="line"> *      type:'get',</div><div class="line"> *      url:'xx.php'</div><div class="line"> *      success:function()&#123;&#125;</div><div class="line"> * &#125;</div><div class="line"> * </div><div class="line"> * ajax(options)</div><div class="line"> */</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 第3步：处理get和post差异，开始封装 </div><div class="line"> */</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">options</span>)</span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/*如果用户没有传参则返回*/</span></div><div class="line">    <span class="keyword">if</span>(!options || tyepof options !== <span class="string">"object"</span> )&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*处理参数为空情况*/</span></div><div class="line">    <span class="keyword">var</span> type  = options.type === <span class="string">'post'</span> ? <span class="string">'post'</span> : <span class="string">'get'</span> ;</div><div class="line">    <span class="keyword">var</span> url   = options.url || location.pathname;   <span class="comment">//给当前路径</span></div><div class="line">    <span class="keyword">var</span> data  = options.data || &#123;&#125;;</div><div class="line">    <span class="keyword">var</span> <span class="keyword">async</span> = options.async === <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line"></div><div class="line">    <span class="comment">/*把对象参数转成字符串*/</span></div><div class="line">    <span class="keyword">var</span> dataStr = <span class="string">''</span>; </div><div class="line">    <span class="keyword">for</span>( key <span class="keyword">in</span> data )&#123;</div><div class="line">        dataStr += key + <span class="string">"="</span> + data[key] + <span class="string">"&amp;"</span>;</div><div class="line">    &#125;</div><div class="line">    dataStr = dataStr.slice(<span class="number">0</span>,<span class="number">-1</span>);</div><div class="line">    <span class="comment">//console.log(dataStr);</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line"></div><div class="line">    <span class="comment">/*处理get和post请求差异*/</span></div><div class="line">    <span class="keyword">if</span>(type === <span class="string">'get'</span>)&#123;</div><div class="line">        xhr.open(type,url + <span class="string">"?"</span> + dataStr ,<span class="keyword">async</span>);</div><div class="line">        xhr.send(<span class="literal">null</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        xhr.open(type,url,<span class="keyword">async</span>);</div><div class="line">        xhr.setRequestHeader(<span class="string">'content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</div><div class="line">        xhr.send(dataStr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*注册请求响应监听事件*/</span></div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">/*响应完成*/</span></div><div class="line">        <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> )&#123;</div><div class="line">            <span class="comment">/*响应成功*/</span></div><div class="line">            <span class="keyword">if</span>(xhr.status == <span class="number">200</span> )&#123;</div><div class="line"></div><div class="line">                <span class="comment">/*根据响应头的content-type属性指定方法接收到的内容*/</span></div><div class="line">                <span class="keyword">var</span> contentType = xhr.getResponseHeader(<span class="string">'content-type'</span>);</div><div class="line">                <span class="keyword">var</span> data = <span class="literal">null</span>;</div><div class="line">                <span class="keyword">if</span>(contentType.indexOf(<span class="string">'json'</span>) &gt; <span class="number">-1</span>)&#123;</div><div class="line">                    data = <span class="built_in">JSON</span>.parse(xhr.responseText);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(contentType.indexOf(<span class="string">'xml'</span>) &gt; <span class="number">-1</span>) &#123;</div><div class="line">                    data = xhr.responseXML;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    data = xhr.responseText;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">/*执行成功函数*/</span></div><div class="line">                options.success &amp;&amp; options.success(data);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">/*响应失败*/</span></div><div class="line">                options.error &amp;&amp; options.error(xhr.statusText);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 第4步：利用命名空间防止冲突</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="built_in">window</span>.itcast = &#123;</div><div class="line">    <span class="attr">ajax</span>:<span class="function"><span class="keyword">function</span>(<span class="params">options</span>)</span>&#123;</div><div class="line">        <span class="comment">//console.log('myajax');</span></div><div class="line"></div><div class="line">        <span class="comment">/*如果用户没有传参则返回*/</span></div><div class="line">        <span class="keyword">if</span>(!options || tyepof options !== <span class="string">"object"</span>  )&#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/*处理参数为空情况*/</span></div><div class="line">        <span class="keyword">var</span> type  = options.type === <span class="string">'post'</span> ? <span class="string">'post'</span> : <span class="string">'get'</span> ;</div><div class="line">	    <span class="keyword">var</span> url   = options.url || location.pathname;   <span class="comment">//给当前路径</span></div><div class="line">	    <span class="keyword">var</span> data  = options.data || &#123;&#125;;</div><div class="line">	    <span class="keyword">var</span> <span class="keyword">async</span> = options.async === <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line"></div><div class="line">        <span class="comment">/*把对象参数转成字符串*/</span></div><div class="line">        <span class="keyword">var</span> dataStr = <span class="string">''</span>; </div><div class="line">        <span class="keyword">for</span>( key <span class="keyword">in</span> data )&#123;</div><div class="line">            dataStr += key + <span class="string">"="</span> + data[key] + <span class="string">"&amp;"</span>;</div><div class="line">        &#125;</div><div class="line">        dataStr = dataStr.slice(<span class="number">0</span>,<span class="number">-1</span>);</div><div class="line">        <span class="comment">//console.log(dataStr);</span></div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line"></div><div class="line">        <span class="comment">/*处理get和post请求差异*/</span></div><div class="line">        <span class="keyword">if</span>(type === <span class="string">'get'</span>)&#123;</div><div class="line">            xhr.open(type,url + <span class="string">"?"</span> + dataStr ,<span class="keyword">async</span>);</div><div class="line">            xhr.send(<span class="literal">null</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            xhr.open(type,url,<span class="keyword">async</span>);</div><div class="line">            xhr.setRequestHeader(<span class="string">'content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</div><div class="line">            xhr.send(dataStr);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/*注册请求响应监听事件*/</span></div><div class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="comment">/*响应完成*/</span></div><div class="line">            <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> )&#123;</div><div class="line">                <span class="comment">/*响应成功*/</span></div><div class="line">                <span class="keyword">if</span>(xhr.status == <span class="number">200</span> )&#123;</div><div class="line"></div><div class="line">                    <span class="comment">/*根据响应头的content-type属性指定方法接收到的内容*/</span></div><div class="line">                    <span class="keyword">var</span> contentType = xhr.getResponseHeader(<span class="string">'content-type'</span>);</div><div class="line">                    <span class="keyword">var</span> data = <span class="literal">null</span>;</div><div class="line">                    <span class="keyword">if</span>(contentType.indexOf(<span class="string">'json'</span>) &gt; <span class="number">-1</span>)&#123;</div><div class="line">                        data = <span class="built_in">JSON</span>.parse(xhr.responseText);</div><div class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(contentType.indexOf(<span class="string">'xml'</span>) &gt; <span class="number">-1</span>) &#123;</div><div class="line">                        data = xhr.responseXML;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        data = xhr.responseText;</div><div class="line">                    &#125;</div><div class="line">                    <span class="comment">/*执行成功函数*/</span></div><div class="line">                    options.success &amp;&amp; options.success(data);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">/*响应失败*/</span></div><div class="line">                    options.error &amp;&amp; options.error(xhr.statusText);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="7-8-jquery的ajax"><a href="#7-8-jquery的ajax" class="headerlink" title="7.8  jquery的ajax"></a>7.8  jquery的ajax</h3><p>jQuery Ajax介绍 <a href="http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp" target="_blank" rel="external">w3school网站</a></p>
<blockquote>
<p>jQuery为我们提供了更强大的Ajax封装,工作中我们更多的是使用这些已经封装好ajax方法.</p>
</blockquote>
<p>掌握的几个方法:</p>
<ul>
<li>$.ajax({}) 可配置方式发起Ajax请求</li>
<li>$.get() 以GET方式发起Ajax请求</li>
<li>$.post() 以POST方式发起Ajax请求</li>
<li>$(‘form’).serialize() 序列化表单（即格式化key=val&amp;key=val）</li>
</ul>
<p>$.ajax方法常用参数：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">url 接口地址</div><div class="line">type 请求方式</div><div class="line">timeout 请求超时</div><div class="line">dataType 服务器返回格式</div><div class="line">data 发送请求数据</div><div class="line">beforeSend: function () &#123;&#125; 请求发起前调用</div><div class="line">success 成功响应后调用</div><div class="line">error 错误响应时调用</div><div class="line">complete 响应完成时调用（包括成功和失败）</div></pre></td></tr></table></figure></p>
<h3 id="7-9、-案例练习"><a href="#7-9、-案例练习" class="headerlink" title="7.9、 案例练习"></a>7.9、 案例练习</h3><p>1、Loading状态<br>2、禁止重复提交<br>3、表单处理<br>4、数据验证<br>接口化开发<br>请求地址即所谓的接口，通常我们所说的接口化开发，其实是指一个接口对应一个功能，<br>并且严格约束了请求参数和响应结果的格式，这样前后端在开发过程中，可以减少不必要的讨论，<br>从而并行开发，可以极大的提升开发效率，另外一个好处，当网站进行改版后，服务端接口只需要进行微调。</p>
<p><strong>具体参考代码</strong></p>
<h2 id="8、模版引擎"><a href="#8、模版引擎" class="headerlink" title="8、模版引擎"></a>8、模版引擎</h2><blockquote>
<p>为什么要学习模板引擎?</p>
</blockquote>
<h3 id="8-1、什么是模板引擎？"><a href="#8-1、什么是模板引擎？" class="headerlink" title="8.1、什么是模板引擎？"></a>8.1、什么是模板引擎？</h3><blockquote>
<p>一个帮助我们把数据渲染成图形的界面的工具。</p>
</blockquote>
<p>常见的模板插件</p>
<ul>
<li>BaiduTemplate(百度开发) </li>
<li>artTemplate(腾讯开发) </li>
<li>velocity.js(淘宝开发) </li>
<li>Handlebars</li>
</ul>
<blockquote>
<p>模板引擎的用法大同小异,ArtTemplate由于性能优秀,这里我们演示ArtTemplate的用法</p>
</blockquote>
<h3 id="8-2、-artTemplate-简介语法模板"><a href="#8-2、-artTemplate-简介语法模板" class="headerlink" title="8.2、 artTemplate 简介语法模板"></a>8.2、 artTemplate 简介语法模板</h3><p><strong>使用步骤：</strong></p>
<p>1、导入模板引擎: 将下载好的ArtTemplate导入到页面中</p>
<pre><code>&lt;script src=&quot;./js/template.js&quot;&gt;&lt;/script&gt;
</code></pre><p>2、定义模板:</p>
<p>注意:这路的模板type=’text/html’如果写成javascript会执行</p>
<pre><code>&lt;script id=&quot;template&quot; type=&quot;text/html&quot;&gt;
    &lt;h2&gt;姓名：{{name}} &lt;/h2&gt;
    &lt;h2&gt;年龄：{{age}}  &lt;/h2&gt;
    &lt;h2&gt;技能：{{skill}} &lt;/h2&gt;
&lt;/script&gt;
</code></pre><p>3、渲染模板: 我们可以使用template(模板id,数据) 执行替换了;</p>
<pre><code>//数据
var data = {
    name:&apos;小明&apos;,
    age:18,
    skill:&apos;快速打代码&apos;
};


//模板渲染数据
var tplstr = template(&apos;template&apos;,data);
document.querySelector(&apos;div&apos;).innerHTML = tplstr;
</code></pre><p><strong>模板逻辑语法：</strong></p>
<p> each语法:</p>
<pre><code>&lt;script src=&quot;./js/template.js&quot;&gt;&lt;/script&gt;

&lt;script id=&quot;template&quot; type=&quot;text/html&quot;&gt;
    {{ each list }}
    &lt;tr&gt;
        &lt;td&gt;{{$index+1}}&lt;/td&gt;
        &lt;td&gt;{{$value.url}}&lt;/td&gt;
        &lt;td&gt;{{$value.nowPrice}}&lt;/td&gt;
        &lt;td&gt;{{$value.oldPrice}}&lt;/td&gt;
    &lt;/tr&gt;
    {{/each}}
&lt;/script&gt;

&lt;script&gt;
    var data = [
        {
            &quot;url&quot;:&quot;images/detail01.jpg&quot;,
            &quot;nowPrice&quot;:&quot;10.00&quot;,
            &quot;oldPrice&quot;:&quot;100.00&quot;
        },
        {
            &quot;url&quot;:&quot;images/detail01.jpg&quot;,
            &quot;nowPrice&quot;:&quot;10.00&quot;,
            &quot;oldPrice&quot;:&quot;100.00&quot;
        },
        {
            &quot;url&quot;:&quot;images/detail01.jpg&quot;,
            &quot;nowPrice&quot;:&quot;10.00&quot;,
            &quot;oldPrice&quot;:&quot;100.00&quot;
        }
    ];

    var html = template(&apos;template&apos;,{list:data});
    document.querySelector(&apos;tbody&apos;).innerHTML = html
&lt;/script&gt;
</code></pre><p>if 语法:</p>
<pre><code>&lt;script src=&quot;./js/template.js&quot;&gt;&lt;/script&gt;

&lt;script id=&quot;template&quot; type=&quot;text/html&quot;&gt;
    &lt;h3&gt;{{name}}
    {{if isMan }}
        兄弟,你好
    {{ else }}
        妹子,你好
    {{/if}}
    &lt;/h3&gt;
    &lt;h3&gt;你今天吃益达了嘛。&lt;/h3&gt;
    &lt;hr&gt;
&lt;/script&gt;

&lt;script &gt;
    var person = {
        name:&apos;小明&apos;,
        isMan:true
    };
    var person2 = {
        name:&apos;小红&apos;,
        isMan:false
    };
    document.querySelector(&apos;input[type=&quot;button&quot;]&apos;).onclick = function(){
        var html1 = template(&apos;template&apos;,person);
        document.querySelector(&apos;#template&apos;).innerHTML = html1;

        var html2 = template(&apos;template&apos;,person2);
        document.querySelector(&apos;#template&apos;).innerHTML += html2;
    }
&lt;/script&gt;
</code></pre><h3 id="8-3-模板引擎实现原理"><a href="#8-3-模板引擎实现原理" class="headerlink" title="8.3 模板引擎实现原理"></a>8.3 模板引擎实现原理</h3><blockquote>
<p>模版引擎做了什么事情,替换数据实现的流程是如何实现的? </p>
</blockquote>
<ul>
<li><p>假定js中有如下数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">	name:&quot;大雄&quot;,</div><div class="line">	age:13,</div><div class="line">	skill:&quot;呼叫哆拉A梦&quot;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>希望渲染为这样的界面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;姓名:大雄&lt;/div&gt;</div><div class="line">&lt;div&gt;年龄:13&lt;/div&gt;</div><div class="line">&lt;div&gt;技能:呼叫哆拉A梦&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>解决办法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;姓名:&#123;&#123; name &#125;&#125;&lt;/div&gt;</div><div class="line">&lt;div&gt;年龄:&#123;&#123; age &#125;&#125;&lt;/div&gt;</div><div class="line">&lt;div&gt;技能:&#123;&#123; skill &#125;&#125;&lt;/div&gt;</div><div class="line">```	</div><div class="line">&gt; 1.定义这样一个模板，把要显示数据的位置用 &#123;&#123; 属性名 &#125;&#125;部分占位。</div><div class="line">&gt; 2.写一个函数，读取模板---&gt;找到占位的坑---&gt;传入对象替换---&gt;返回html代码 </div><div class="line">![模版引擎替换](./imgs/template1.png)</div><div class="line"></div><div class="line"></div><div class="line">实现方法：</div><div class="line"></div><div class="line">1. 我们定义一段文本作为模板,读取文本,使用特殊的符号&#123;&#123; 属性名 &#125;&#125;占位</div><div class="line">2. 通过正则表达式找到这些特殊的符号进行替换,是不是就实现了?</div><div class="line"></div><div class="line">** 自定义模板引擎(理解) **</div><div class="line"></div><div class="line">	 function mytemplate(id,data)&#123;</div><div class="line">		//1.获取模板字符串</div><div class="line">	 	var tmpl = document.querySelector(&apos;#&apos;+id).innerHTML;</div><div class="line">	 	//2.查找里面的字符串 &#123;&#123;&#125;&#125;</div><div class="line">	 	var re = /&#123;&#123;(\w+)&#125;&#125;/; </div><div class="line">	 	var result = null;</div><div class="line">	 	//3.当还有值就替换</div><div class="line">	 	while(result = re.exec(tmpl))&#123;</div><div class="line">	 		tmpl = tmpl.replace(result[0],data[result[1]]); //替换后重新赋值</div><div class="line">	 	&#125;</div><div class="line">	 	return tmpl</div><div class="line">	 &#125;</div><div class="line"></div><div class="line">![](./imgs/kaihui.jpg)</div><div class="line"></div><div class="line">## 10、同源&amp;跨域</div><div class="line"></div><div class="line">### 10.1 同源</div><div class="line"></div><div class="line"></div><div class="line">什么是同源，同源政策？</div><div class="line"></div><div class="line">网址组成:一个网页地址通常有协议，子域名，主域名，端口，请求资源地址，共同组成。</div><div class="line">&gt; ![](./imgs/tongyuan.png)</div><div class="line"></div><div class="line">同源：两个网页**域名，协议，端口**完全相同。</div><div class="line">同源政策：当两个网页，域名，协议，端口任何一个不同时，就会有一些限制,是浏览器的一种安全策略。</div><div class="line">同源政策目的：是为了保证用户信息的安全，防止恶意的网站窃取数据。</div><div class="line"></div><div class="line">跨域: 两个网页**域名，协议，端口**任何一个不同,(即不同源我们称之为跨域)</div><div class="line">跨域访问:而突破绕过这些限制，在两个页面之间进行访问，我们称为跨域访问。</div></pre></td></tr></table></figure>
</li>
</ul>
<p>网页A网址：<br><a href="http://www.example.com/index.html" target="_blank" rel="external">http://www.example.com/index.html</a></p>
<p>网页B地址：<br>    网页A网址：<br>    <a href="http://www.example.com/index.html" target="_blank" rel="external">http://www.example.com/index.html</a></p>
<pre><code>访问网页B：                                    
http://www.baidu.com/server.php             域名不同
http://api.example.com/server.php           子域不同    
https//www.example.com/server.php           协议不同        
http://www.example.com:8080/server.php      端口不同        
http://192.168.10.78.com/server.php         IP

http://www.example.com/detail.html          文件不同
http://www.example.com/home/category.html   目录不同
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">限制范围(非同源)：</div><div class="line"></div><div class="line">- 无法共享 cookie, localStorage, indexDB</div><div class="line">- 无法操作彼此的 dom 元素</div><div class="line">- 无法发送 ajax 请求</div><div class="line">- 无法通过 flash 发送 http 请求</div><div class="line"></div><div class="line">&gt; 如果浏览器没有这些限制会怎么样呢？</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">###10.2	跨域</div><div class="line"></div><div class="line">&gt; 同源策略做了很严格的限制，但是在实际的场景中，又确实有很多地方需要突破同源策略的限制，也就是我们常说的跨域</div><div class="line"></div><div class="line">跨域: 两个网页**域名，协议，端口**任何一个不同,(即不同源我们称之为跨域)</div><div class="line">跨域访问：不同源网页之间,访问获取传递数据.</div><div class="line"></div><div class="line">可跨域访问的标签</div></pre></td></tr></table></figure>
<p>link,<br>iframe<br>img<br>script<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">### 10.3  jsonp </div><div class="line"></div><div class="line">&gt; 英文名: JSON with Padding</div><div class="line"></div><div class="line">** 原理剖析**</div><div class="line"></div><div class="line"></div><div class="line">&gt; 其本质是利用了`&lt;script src=&quot;&quot;&gt;&lt;/script&gt;`标签具有可跨域的特性</div><div class="line">由服务端返回一个预先定义好的Javascript函数的调用，并且将服务器数据以该函数参数的形式传递过来，此方法需要前后端配合完成。</div><div class="line"></div><div class="line"></div><div class="line">html页面：</div></pre></td></tr></table></figure></p>
<!-- 当我们用script标签去加载的时候  会把内容解析成js去执行 -->
<script>
     //1.我们先定义一个函数
     function myfoo( jsonpData ){
         //内部如何使用就是我们自己定的了。
         console.log(jsonpData);
     }
 </script>

 <!-- 2.利用script标签的src属性请求并执行调用-->
 <script src="http://api.study.php?callback=myfoo"></script>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">后台php页面：</div></pre></td></tr></table></figure>
<p>&lt;?php<br>     //接收传递过来的函数名<br>     $name = $_GET[‘callback’]; </p>
<pre><code>//转为数组为json格式数据
$arr = array(&quot;小李飞&quot;,&quot;大张伟&quot;);
$jsonData = json_encode($arr);

//返回函数名称的调用。
echo $name.&quot;(&quot;.$jsonData.&quot;)&quot;;
</code></pre><p>?&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">###10.4 CORS 跨域</div><div class="line"></div><div class="line">&gt; 服务端设置响应头` header(&apos;Access-Control-Allow-Origin: *&apos;); `,实现跨域</div><div class="line"></div><div class="line"></div><div class="line">html页面：</div></pre></td></tr></table></figure></p>
<p>//在jquery中跨域<br>$.ajax({<br>    type:’post’,<br>    url:’<a href="http://api.study.com/post.php" target="_blank" rel="external">http://api.study.com/post.php</a>‘,<br>    data:{<br>        name:’汤姆’<br>    },<br>    dataType:’json’,<br>    success:function(data){<br>        console.log(data);<br>    }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">后台php页面</div></pre></td></tr></table></figure></p>
<p>/<em>允许所有的跨域请求</em>/<br>//header(‘Access-Control-Allow-Origin:*’);</p>
<p>/<em>也可以显示某一个具体的来源可以访问</em>/<br>header(‘Access-Control-Allow-Origin:<a href="http://www.study.com" target="_blank" rel="external">http://www.study.com</a>‘);</p>
<p>$arr = array(<br>    ‘name’=&gt;$_POST[‘name’]<br>);</p>
<p>echo json_encode($arr);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">优点： get 和 post请求都能发送</div><div class="line"></div><div class="line"></div><div class="line">###10.5  跨域方案（了解）</div><div class="line"></div><div class="line">&gt; 以下方式基本不用啊，了解即可：</div></pre></td></tr></table></figure></p>
<ol>
<li>顶级域名相同的可以通过domain.name来解决，即同时设置 domain.name = 顶级域名（如example.com）  </li>
<li>document.domain + iframe  </li>
<li>window.name + iframe  </li>
<li>location.hash + iframe  </li>
<li>window.postMessage()<br>参考资料<br><a href="http://rickgray.me/2015/09/03/solutions-to-cross-domain-in-browser.html" target="_blank" rel="external">http://rickgray.me/2015/09/03/solutions-to-cross-domain-in-browser.html</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">## 11 综合案例</div><div class="line"></div><div class="line">### 11.1 瀑布流案例（必须掌握）</div><div class="line"></div><div class="line"></div><div class="line">什么是瀑布流？</div><div class="line"></div><div class="line">&gt; 就是一种常见的网页布局的方式，比如花瓣网所采用的。</div><div class="line"></div><div class="line">![](./imgs/waterFall.png)</div><div class="line"></div><div class="line"></div><div class="line">布局特点：</div><div class="line"></div><div class="line">1. 图文元素按列排放。</div><div class="line">2. 每列内容宽度一致，但高度不同。</div><div class="line">3. 第一行顶部对象。后面内容受首行高度影响。错落排放。</div><div class="line">4. 滚动到底部就会优先向最短的列添加数据。</div><div class="line"></div><div class="line"> </div><div class="line">瀑布流布局核心: </div><div class="line">- `宽度`一致,`高度`参差不齐</div><div class="line">- 新增行的内容,**优先添加到最矮**的列</div><div class="line"></div><div class="line"></div><div class="line">### 11.2、天气接口（必须掌握）</div><div class="line"></div><div class="line">天气api接口地址:</div></pre></td></tr></table></figure>
</li>
</ol>
<p>url: ‘<a href="http://api.map.baidu.com/telematics/v3/weather?location=%E5%B9%BF%E5%B7%9E&amp;output=json&amp;ak=FK9mkfdQsloEngodbFl4FeY3" target="_blank" rel="external">http://api.map.baidu.com/telematics/v3/weather?location=%E5%B9%BF%E5%B7%9E&amp;output=json&amp;ak=FK9mkfdQsloEngodbFl4FeY3</a>‘,<br>```<br>天气api接口参数:<br><img src="./imgs/jk.png" alt=""></p>
	  

	  <div>
  		<center>
		  <div class="pagination">
<ul class="pagination">
	
	
	
	
	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
			
		
	
		
			
			
			
		
			
		
	
	
	
		<li class="prev"><a href="/2017/06/26/HTML5/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>prev</a></li>
	
	<li><a href="/"><i class="fa fa-archive"></i>Home</a></li>
	
		<li class="next"><a href="/2017/06/26/1. HTML5/" class="alignright next">next<i class="fa fa-arrow-circle-o-right"></i></a></li>
	
</ul>
</div>

		</center>
	  </div>
	  
	</div> <!-- col-md-9/col-md-12 -->
	
  </div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
	<footer> <p>
  &copy; 2017 Mary
  
      with help from <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-wixo/">Wixo</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.tableofcontents.min.js"></script>
<script src="/js/tocgenerator.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




</body>
</html>
